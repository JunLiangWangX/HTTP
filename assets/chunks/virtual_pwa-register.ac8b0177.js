import{a3 as v}from"./framework.62682723.js";function x(p={}){const{immediate:u=!1,onNeedRefresh:l,onOfflineReady:t,onRegistered:s,onRegisteredSW:r,onRegisterError:d}=p;let e,f,a;const g=async(c=!0)=>{await f,await(a==null?void 0:a())};async function w(){if("serviceWorker"in navigator){const{Workbox:c}=await v(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[]);e=new c("/HTTP-Explanation/sw.js",{scope:"/HTTP-Explanation/",type:"classic"}),a=async()=>{await(e==null?void 0:e.messageSkipWaiting())};{let i=!1;const o=()=>{i=!0,e==null||e.addEventListener("controlling",n=>{n.isUpdate&&window.location.reload()}),l==null||l()};e.addEventListener("installed",n=>{typeof n.isUpdate>"u"?typeof n.isExternal<"u"?n.isExternal?o():!i&&(t==null||t()):n.isExternal?window.location.reload():!i&&(t==null||t()):n.isUpdate||t==null||t()}),e.addEventListener("waiting",o),e.addEventListener("externalwaiting",o)}e.register({immediate:u}).then(i=>{r?r("/HTTP-Explanation/sw.js",i):s==null||s(i)}).catch(i=>{d==null||d(i)})}}return f=w(),g}export{x as registerSW};
