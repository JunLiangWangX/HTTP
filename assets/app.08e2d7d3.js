import{d as v,h as c,a2 as b,a3 as y,o as p,c as d,k as f,t as w,l as P,e as m,a4 as r,V as i,a5 as C,a6 as k,a7 as E,a8 as S,a9 as D,aa as V,ab as L,ac as O,ad as T,ae as x,u as B,j as W,A as j,af as N,ag as $,ah as F}from"./chunks/framework.62682723.js";import{t as _}from"./chunks/theme.1d4a479c.js";const I={key:0,class:"pwa-toast",role:"alertdialog","aria-labelledby":"pwa-message"},M={id:"pwa-message",class:"mb-3"},G=v({__name:"ReloadPrompt",setup(t){const e=c(!1),a=c(!1);let n;const h=()=>{e.value=!0},A=()=>{a.value=!0},R=async()=>{e.value=!1,a.value=!1};return b(async()=>{const{registerSW:u}=await y(()=>import("./chunks/virtual_pwa-register.ac8b0177.js"),["assets/chunks/virtual_pwa-register.ac8b0177.js","assets/chunks/framework.62682723.js"]);n=u({immediate:!0,onOfflineReady:h,onNeedRefresh:A,onRegistered(){console.info("Service Worker registered")},onRegisterError(s){console.error("Service Worker registration error!",s)}})}),(u,s)=>e.value||a.value?(p(),d("div",I,[f("div",M,w(e.value?"该站点已支持PWA离线访问🚀":"有新内容可用🤩"),1),a.value?(p(),d("button",{key:0,type:"button",class:"pwa-refresh",onClick:s[0]||(s[0]=K=>{var l;return(l=P(n))==null?void 0:l()})}," 重新加载 ")):m("",!0),f("button",{type:"button",class:"pwa-cancel",onClick:R}," 关闭 ")])):m("",!0)}});const H={..._,Layout(){return r(_.Layout,null,{"layout-bottom":()=>r(G)})}};function g(t){if(t.extends){const e=g(t.extends);return{...e,...t,async enhanceApp(a){e.enhanceApp&&await e.enhanceApp(a),t.enhanceApp&&await t.enhanceApp(a)}}}return t}const o=g(H),U=v({name:"VitePressApp",setup(){const{site:t}=B();return W(()=>{j(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),N(),$(),F(),o.setup&&o.setup(),()=>r(o.Layout)}});async function q(){const t=J(),e=z();e.provide(k,t);const a=E(t.route);return e.provide(S,a),e.component("Content",D),e.component("ClientOnly",V),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),o.enhanceApp&&await o.enhanceApp({app:e,router:t,siteData:L}),{app:e,router:t,data:a}}function z(){return O(U)}function J(){let t=i,e;return T(a=>{let n=x(a);return n?(t&&(e=n),(t||e===n)&&(n=n.replace(/\.js$/,".lean.js")),i&&(t=!1),y(()=>import(n),[])):null},o.NotFound)}i&&q().then(({app:t,router:e,data:a})=>{e.go().then(()=>{C(e.route,a.site),t.mount("#app")})});export{q as createApp};
