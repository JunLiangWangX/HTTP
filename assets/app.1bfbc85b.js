import{d as y,h as p,Z as b,$ as g,o as d,c as f,k as m,t as w,l as P,e as _,a0 as i,s as l,a1 as C,a2 as k,a3 as E,a4 as S,a5 as D,a6 as L,a7 as O,a8 as T,a9 as V,aa as x,u as B,j as W,y as $,ab as j,ac as N,ad as F}from"./chunks/framework.db6c0025.js";import{t as v}from"./chunks/theme.2e2b4fb2.js";const I={key:0,class:"pwa-toast",role:"alertdialog","aria-labelledby":"pwa-message"},M={id:"pwa-message",class:"mb-3"},G=y({__name:"ReloadPrompt",setup(t){const e=p(!1),a=p(!1);let n;const s=()=>{e.value=!0},R=()=>{a.value=!0},A=async()=>{e.value=!1,a.value=!1};return b(async()=>{const{registerSW:u}=await g(()=>import("./chunks/virtual_pwa-register.dd8142ff.js"),["assets/chunks/virtual_pwa-register.dd8142ff.js","assets/chunks/framework.db6c0025.js"]);n=u({immediate:!0,onOfflineReady:s,onNeedRefresh:R,onRegistered(){console.info("Service Worker registered")},onRegisterError(r){console.error("Service Worker registration error!",r)}})}),(u,r)=>e.value||a.value?(d(),f("div",I,[m("div",M,w(e.value?"该站点已支持PWA离线访问🚀":"有新内容可用🤩"),1),a.value?(d(),f("button",{key:0,type:"button",class:"pwa-refresh",onClick:r[0]||(r[0]=J=>{var c;return(c=P(n))==null?void 0:c()})}," 重新加载 ")):_("",!0),m("button",{type:"button",class:"pwa-cancel",onClick:A}," 关闭 ")])):_("",!0)}});const H={...v,Layout(){return i(v.Layout,null,{"layout-bottom":()=>i(G)})}};function h(t){if(t.extends){const e=h(t.extends);return{...e,...t,async enhanceApp(a){e.enhanceApp&&await e.enhanceApp(a),t.enhanceApp&&await t.enhanceApp(a)}}}return t}const o=h(H),U=y({name:"VitePressApp",setup(){const{site:t}=B();return W(()=>{$(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),j(),N(),F(),o.setup&&o.setup(),()=>i(o.Layout)}});async function Z(){const t=z(),e=q();e.provide(k,t);const a=E(t.route);return e.provide(S,a),e.component("Content",D),e.component("ClientOnly",L),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),o.enhanceApp&&await o.enhanceApp({app:e,router:t,siteData:O}),{app:e,router:t,data:a}}function q(){return T(U)}function z(){let t=l,e;return V(a=>{let n=x(a),s=null;return n&&(t&&(e=n),(t||e===n)&&(n=n.replace(/\.js$/,".lean.js")),s=g(()=>import(n),[])),l&&(t=!1),s},o.NotFound)}l&&Z().then(({app:t,router:e,data:a})=>{e.go().then(()=>{C(e.route,a.site),t.mount("#app")})});export{Z as createApp};
